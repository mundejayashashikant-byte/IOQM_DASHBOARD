<script>
    // Function to get query parameters (like folder ID and name) from the URL
    function getQueryParam(param) {
        const urlParams = new URLSearchParams(window.location.search);
        return urlParams.get(param);
    }

    const folderId = getQueryParam('id');
    const chapterName = getQueryParam('name');

    if (folderId && chapterName) {
        // Set the custom title using the chapter name
        document.getElementById('chapter-title').textContent = decodeURIComponent(chapterName);
        document.title = decodeURIComponent(chapterName) + " Content";

        // Set the iframe source using the folder ID
        const iframe = document.getElementById('content-iframe');
        const driveURL = `https://drive.google.com/embeddedfolderview?id=${folderId}#list`;
        iframe.src = driveURL;

    } else {
        document.getElementById('chapter-title').textContent = "Chapter Not Found";
        
        // **CRITICAL FIX:** Using querySelector to target the element by its class name
        document.querySelector('.content-viewer').innerHTML = '<p style="padding: 20px; text-align: center;">Error: Chapter content could not be loaded. Please return to the <a href="index.html">Chapters Dashboard</a> to select content.</p>';
    }
</script>
